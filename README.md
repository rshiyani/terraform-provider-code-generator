# terraform-provider-code-generator (terrajinja)

Terrajinja is a CLI tool which leads to the creation of Terraform Provider Code File. The data used by Terrajinja for creation of Terraform Provider File is provided in the form of YAML.


Technologies Used: 
Jinja - Used for Templating
Python - Used for CLI Creation

## File Structure

```
Your Workplace
|           
+---config // Config folder is created by user contains the configuration specified by user in yaml form which leads to the generation of Terraform Provider Files.
|   |   provider.yml    // You have to write Configuration Required for creation of provider.go file for Terraform Provider. 
|   |   provider_generated.yml    // This File is Generated by Terrajinja which preprocess provider file and is used for generation by Terrajinja.
|   |   
|   +---datasources    // Folder Named datasources contains the datasources configuration yamls for the resources, leads to generation of datasource file and test file.
|   |       resource_name.yml    // Contains datasource configuration of the resource.
|   |       other_resource_name.yml // Contains datasource configuration of the resource.
|   |       
|   \---resources    // Folder Named resources contains the resources configuration yamls for the resources, leads to generation of resource file and test file.
|       |   resource_name.yml    // Contains resource configuration of the resource.
|       |   other_resource_name.yml    // Contains resource configuration of the resource.
|       |   
|       \---preprocess // This Folder is generated by Terrajinja which preprocess the user configuration and is used for generation by Terrajinja.
|               resource_name_generated.yml    // Contains preprocessed resource configuration of the resource.
|               other_resource_name_generated.yml    // Contains preprocessed resource configuration of the resource.

```     

## Steps to Use Terrajinja
1. Set the path of terrajinja.exe in System Environment Variable
2. Once the terajinja.exe is set, you can check by running below command :- 

```
$terrajinja -h

usage: terrajinja.exe [-h] [--generate GENERATE] [--input INPUT] --pname PNAME

TerraJinja Tool that generates files for Terraform Provider.

Made By:  █▀▀ █▀█ █▀▀ █▀ ▀█▀   █▀▄ ▄▀█ ▀█▀ ▄▀█   █▀ █▄█ █▀ ▀█▀ █▀▀ █▀▄▀█ █▀
          █▄▄ █▀▄ ██▄ ▄█ ░█░   █▄▀ █▀█ ░█░ █▀█   ▄█ ░█░ ▄█ ░█░ ██▄ █░▀░█ ▄█

optional arguments:
  -h, --help           show this help message and exit
  --generate GENERATE  Enter the type you want to generate Eg. "resource,resource_test,datasource"
  --input INPUT        Enter the resource file name you want to generate for type Eg. "contract,subnet"
  --pname PNAME        Enter the provider name Eg. "aws"
```

   -> --pname(Provider Name): This flag is a required.
   -> --generate: Here the comma seperated string is provided. By default the value of this is "all".
      Supported Values: resource, resource_test, datasource, datasource_test, provider, provider_test, model
   -> --input: Here the comma seperated string is provided. By default the value of this is "all".
   
3. Examples:
   ```
   terrajinja --pname="YourProviderName"
   ```
   Above command will generate all the terraform provider files for the ymls provided in config.
   ```
   terrajinja --pname="YourProviderName" --input="contract,tenant"
   ```
   Above command will generate all the terraform provider files for the ymls provided in config for resource contract and tenant only.
   ```
   terrajinja --pname="YourProviderName" --generate="resource,resource_test"
   ```
   Above command will generate the terraform provider resource and resource_test files for the ymls provided in config.
   ```
   terrajinja --pname="YourProviderName" --input="tenant" --generate="datasource,datasource_test"
   ```
   Above command will generate the terraform provider datasource and datasource_test files for the ymls provided for tenant resource in config.
   ```
   terrajinja --pname="YourProviderName" --generate="provider,provider_test"
   ```
   Above command will generate the terraform provider.go and provider_test.go file for the provider yaml provided in config.

