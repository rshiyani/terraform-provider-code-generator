# terraform-provider-code-generator (terrajinja)

Terrajinja is a CLI tool which leads to the creation of Terraform Provider Code File. The data used by Terrajinja for creation of Terraform Provider File is provided in the form of YAML.


Technologies Used: 
Jinja - Used for Templating
Python - Used for CLI Creation

## File Structure

```
Your Workplace
|           
+---config // Config folder is created by user contains the configuration specified by user in yaml form which leads to the generation of Terraform Provider Files.
|   |   provider.yml    // You have to write Configuration Required for creation of provider.go file for Terraform Provider. 
|   |   provider_generated.yml    // This File is Generated by Terrajinja which preprocess provider file and is used for generation by Terrajinja.
|   |   
|   +---datasources    // Folder Named datasources contains the datasources configuration yamls for the resources, leads to generation of datasource file and test file.
|   |       resource_name.yml    // Contains datasource configuration of the resource.
|   |       other_resource_name.yml // Contains datasource configuration of the resource.
|   |       
|   \---resources    // Folder Named resources contains the resources configuration yamls for the resources, leads to generation of resource file and test file.
|       |   resource_name.yml    // Contains resource configuration of the resource.
|       |   other_resource_name.yml    // Contains resource configuration of the resource.
|       |   
|       \---preprocess // This Folder is generated by Terrajinja which preprocess the user configuration and is used for generation by Terrajinja.
|               resource_name_generated.yml    // Contains preprocessed resource configuration of the resource.
|               other_resource_name_generated.yml    // Contains preprocessed resource configuration of the resource.

```     

## Steps to Use Terrajinja
1. Set the path of terrajinja.exe in System Environment Variable
2. Once the terajinja.exe is set, you can check by running below command :- 

```
$terrajinja -h

usage: terrajinja.exe [-h] [--generate GENERATE] [--input INPUT] --pname PNAME

TerraJinja Tool that generates files for Terraform Provider.

Made By:  █▀▀ █▀█ █▀▀ █▀ ▀█▀   █▀▄ ▄▀█ ▀█▀ ▄▀█   █▀ █▄█ █▀ ▀█▀ █▀▀ █▀▄▀█ █▀
          █▄▄ █▀▄ ██▄ ▄█ ░█░   █▄▀ █▀█ ░█░ █▀█   ▄█ ░█░ ▄█ ░█░ ██▄ █░▀░█ ▄█

optional arguments:
  -h, --help           show this help message and exit
  --generate GENERATE  Enter the type you want to generate Eg. "resource,resource_test,datasource"
  --input INPUT        Enter the resource file name you want to generate for type Eg. "contract,subnet"
  --pname PNAME        Enter the provider name Eg. "aws"
```

   -> --pname(Provider Name): This flag is a required.
   -> --generate: Here the comma seperated string is provided. By default the value of this is "all".
      Supported Values: resource, resource_test, datasource, datasource_test, provider, provider_test, model
   -> --input: Here the comma seperated string is provided. By default the value of this is "all".
   
3. Examples:
   ```
   terrajinja --pname="YourProviderName"
   ```
   Above command will generate all the terraform provider files for the ymls provided in config.
   ```
   terrajinja --pname="YourProviderName" --input="contract,tenant"
   ```
   Above command will generate all the terraform provider files for the ymls provided in config for resource contract and tenant only.
   ```
   terrajinja --pname="YourProviderName" --generate="resource,resource_test"
   ```
   Above command will generate the terraform provider resource and resource_test files for the ymls provided in config.
   ```
   terrajinja --pname="YourProviderName" --input="tenant" --generate="datasource,datasource_test"
   ```
   Above command will generate the terraform provider datasource and datasource_test files for the ymls provided for tenant resource in config.
   ```
   terrajinja --pname="YourProviderName" --generate="provider,provider_test"
   ```
   Above command will generate the terraform provider.go and provider_test.go file for the provider yaml provided in config.





## Contributor Guide

```
YourWorkplace
|   .gitignore
|   helper.py    // Contains the Helper Function for Creation of Terraform Provider Files for Terrajinja
|   LICENSE
|   loading_animation.py    // Contains the Logic for Formatting Go Files and Loading Animation
|   preprocess.py    // Contains the Function which preprocess the user file and generate new file used for generation of Terraform Provider File
|   README.md    // README contains the information related to use of terrajinja
|   requirements.txt    // Contains the names of the dependencies
|   terrajinja.py    // Contains the Logic of the CLI. It's the main file which leads to the execution of the terrajinja CLI.
|   terrajinja.spec    // Autogenerated when we build the execuatable(.exe file) of the terrajinja
|   utils.py    // Contains the Function for Custom JINJA Filters used in templating.
|   
+---.vscode    // Contains the Workplace Settings, User Settings
|       launch.json    // File Controls the run/debug settings of your Vistual Studio Code Project
|       move_binary.sh    // Contains the script for movoing the executable generated to the path of directory where the system environment variable is set.
|       tasks.json    // Workplace or Folder Specific Tasks are configured in tasks.json file.
|       
+---build    // This Folder is created automatically when you build the executable for the project
|   \---terrajinja
|           Analysis-00.toc
|           base_library.zip
|           EXE-00.toc
|           PKG-00.toc
|           PYZ-00.pyz
|           PYZ-00.toc
|           terrajinja.exe.manifest
|           terrajinja.pkg
|           Tree-00.toc
|           Tree-01.toc
|           Tree-02.toc
|           warn-terrajinja.txt
|           xref-terrajinja.html
|           
+---config // Config folder is created by user contains the configuration specified by user in yaml form which leads to the generation of Terraform Provider Files.
|   |   provider.yml    // You have to write Configuration Required for creation of provider.go file for Terraform Provider. 
|   |   provider_generated.yml    // This File is Generated by Terrajinja which preprocess provider file and is used for generation by Terrajinja.
|   |   
|   +---datasources    // Folder Named datasources contains the datasources configuration yamls for the resources, leads to generation of datasource file and test file.
|   |       resource_name.yml    // Contains datasource configuration of the resource.
|   |       other_resource_name.yml // Contains datasource configuration of the resource.
|   |       
|   \---resources    // Folder Named resources contains the resources configuration yamls for the resources, leads to generation of resource file and test file.
|       |   resource_name.yml    // Contains resource configuration of the resource.
|       |   other_resource_name.yml    // Contains resource configuration of the resource.
|       |   
|       \---preprocess // This Folder is generated by Terrajinja which preprocess the user configuration and is used for generation by Terrajinja.
|               resource_name_generated.yml    // Contains preprocessed resource configuration of the resource.
|               other_resource_name_generated.yml    // Contains preprocessed resource configuration of the resource.
|               
+---dist    // The Generated Executable File is stored in the dist Folder.
|
+---json_schema    // This folder contains the file which is responsible to display autocomplete suggestions for configuration files in YAML Format.
|       client_validate.json    // Contains the json_schema responsible for autocomplete suggestions for Client YAML Files.
|       datasource_validate.json    // Contains the json_schema responsible for autocomplete suggestions for Datasource YAML Files.
|       provider_validate.json    // Contains the json_schema responsible for autocomplete suggestions for Provider YAML File.
|       resource_validate.json    // Contains the json_schema responsible for autocomplete suggestions for Resource YAML Files.
|       
+---templates    // Folder contains the general templates written in jinja used for generation of Terraform Provider Files.
|   |   client.j2    // File Contains the template for Client File
|   |   client_scaffold.j2    // File Contains the Static General template for CLient Scaffold File
|   |   client_test.j2    // File Contains the template for Client Test File
|   |   datasource.j2    // File Contains the template for Datasource File
|   |   datasource_test.j2    // File Contains the template for Datasource Test File
|   |   model.j2    // File Contains the template for Model File
|   |   provider.j2    // File Contains the template for Provider File
|   |   provider_test.j2    // File Contains the template for Provider Test File
|   |   resource.j2    // File contains the template for Resource File
|   |   resource_test.j2    // File contains the template for Resource Test File
|   |   
|   \---helpers    // This Folder Contains the Helper Macros For the template
|           resource_crud.j2    // Contains the Helper Macros for Resource File.
|           schema.j2    // Contains the Helper Macros for Schema Generation.
|           test.j2    // Contains the Helper Macros for Resource Test and Datasource Test File.
|           
\---__pycache__    // This Folder is created automatically Contains the bytecode-compiled and optimised bytecode-compiled versions of program files.
        helper.cpython-39.pyc
        loading_animation.cpython-39.pyc
        main.cpython-39.pyc
        preprocess.cpython-39.pyc
        utils.cpython-310.pyc
        utils.cpython-39.pyc
        

```